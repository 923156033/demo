+function(d){var b=function(f,e){this.$element=d(f);this.options=d.extend({},b.DEFAULTS,e);this.init()};b.prototype.init=function(){var e=this.$element;var i=this.options;var l=e.attr("placeholder")||(i.tags?"请选择或输入...":"请选择...");if(e.attr("multiple")==undefined){if(e.find(' > option[value=""]').size()==0){e.prepend('<option value="">'+l+"</option>")}if(e.find(" > option[selected]").size()==0){e.find(' > option[value=""]').attr("selected",true)}}var h=e.data("url");if(h){i=d.extend({minimumInputLength:1,ajax:{url:h,dataType:"json",data:function(n){var m={rows:i.termRows||10,page:n.page||1};m[i.termQuery]=n.term;return m},processResults:function(n,o){var m=n.content;if(e.attr("multiple")==undefined){m.unshift({id:"",display:l})}return{results:n.content,pagination:{more:!n.last}}}},templateResult:function(m){if(m.loading){return m.text}var n=m.display;if(i.itemDisplay){n=m[i.itemDisplay]}return n},templateSelection:function(m){if(m.display==undefined){return m.text}var n=m.display;if(i.itemLabel){n=m[i.itemLabel]}return n}},i)}var k=e.attr("data-cascade-parent");if(k){var g=e.closest("form").find("select[name='"+k+"']");e.data("cachedOptions",e.children("option").clone());var j=g.val();if(j&&j!=""){e.children("option").each(function(m,n){var p=d(this);var o=p.attr("data-cascade-parent");if(o&&o!=j){p.remove()}})}else{e.empty()}}e.select2(i);e.on("change",function(s){var p=d(this).children("option:selected").val();var w=i.cascadeName;if(w){var t=e.closest("form").find("select[name='"+w+"']");t.empty();if(p&&p!=""){var u=t.attr("data-cascade-parent");if(u){t.data("cachedOptions").each(function(){var y=d(this);var x=y.attr("data-cascade-parent");if(x==undefined||x==p){t.append(y);t.select2(i)}})}else{var r=t.data(p);if(r){t.append(r);t.select2(i)}else{var n=i.cascadeUrl;var o=p;var q=e.attr("name");var v=i.cascadeProperty;if(v){var m=e.find("option[value='"+p+"']");q=v;o=m.attr("data-"+v)}n=Util.addOrReplaceUrlParameter(n,q,o);t.ajaxJsonUrl(n,function(y){var x=[];x.push("<option value=''>"+l+"</option>");for(var z in y){x.push("<option value='"+z+"'>"+y[z]+"</option>")}r=x.join("");t.append(r);t.select2(i);t.data(p,r)})}}}}});if(e.attr("required")=="required"||e.attr("required")=="true"||e.attr("data-rule-required")=="true"){var f=e.closest("form");if(f.size()&&f.data("validation")){e.on("select2-close",function(){e.valid()})}}};b.VERSION="1.0.0";b.DEFAULTS={width:"100%",language:"zh-CN",tags:false,matcher:function(k,g){if(d.trim(k.term)===""){return g}if(typeof g.text==="undefined"){return null}if(d.trim(g.text)===""){return g}var f=k.term;var j=g.text;var e=Pinyin.getCamelChars(j)+"";var i=e.toUpperCase().indexOf(f.toUpperCase())==0;var h=j.toUpperCase().indexOf(f.toUpperCase())==0;if(i||h){return g}return null}};function c(e){Util.assert(d.fn.select2,"依赖组件 select2 未引入");return this.each(function(){var h=d(this);var g=h.data("extSelect");var f=typeof e=="object"&&e;if(!g){h.data("extSelect",(g=new b(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.extSelect;d.fn.extSelect=c;d.fn.extSelect.Constructor=b;d.fn.extSelect.noConflict=function(){d.fn.extSelect=a;return this};d.fn.select2.defaults.set("theme","bootstrap");Global.addComponent({name:"ExtSelect",plugin:c,runPoint:Global.Component_Run_Point.AfterAjaxPageShow,expr:"select:not(.select2-ignore)",order:800})}(jQuery);