+function(c){var d=function(f,e){this.$element=c(f);this.options=c.extend({},d.DEFAULTS,e);this.init()};d.VERSION="1.0.0";d.DEFAULTS={};d.prototype.init=function(){var h=this;var e=this.$element;var f=this.options;e.attr("autocomplete","off");e.attr("placeholder","验证码...看不清点击图片可刷新");if(f.ruleRemote==undefined){e.attr("data-rule-remote",Util.smartParseURL("/pub/captcha/touch-validate"));e.attr("data-msg-remote","验证码不正确");e.attr("data-rule-minlength",4);e.attr("data-msg-minlength","请输入4位验证码");e.attr("data-rule-maxlength",4);e.attr("data-msg-maxlength","请输入4位验证码")}e.wrap('<div class="input-group"></div>');var g=c('<img alt="验证码" class="captcha-img pull-right" style="height: 34px;width: 110px" title="看不清？点击刷新"/>');g.attr("src",Util.smartParseURL("/assets/apps/img/captcha_placeholder.jpg"));e.after(c('<span class="input-group-btn" style="cursor: pointer;padding-left: 10px"></span>').append(g));if(f.inputIcon){if("true"==f.inputIcon||f.inputIcon===true){f.inputIcon="fa-qrcode"}e.wrap('<div class="input-icon"></div>');e.before("<i class='fa "+f.inputIcon+"'></i>");e.attr("data-input-icon-done","true")}this.$captchaImage=g;g.on("click",function(){h.refresh()});e.on("focus",function(){if(Util.endWith(g.attr("src"),"captcha_placeholder.jpg")){h.refresh()}})};d.prototype.refresh=function(){var e=this;e.$captchaImage.attr("src",Util.smartParseURL("/pub/captcha?_="+new Date().getTime()));e.$element.focus().select()};function b(e){return this.each(function(){var h=c(this);var g=h.data("ExtImageCaptchaCode");var f=typeof e=="object"&&e;if(!g){h.data("ExtImageCaptchaCode",(g=new d(this,f)))}if(typeof e=="string"){g[e]()}})}var a=c.fn.extImageCaptchaCode;c.fn.extImageCaptchaCode=b;c.fn.extImageCaptchaCode.noConflict=function(){c.fn.extImageCaptchaCode=a;return this};Global.addComponent({name:"ExtImageCaptchaCode",plugin:b,runPoint:Global.Component_Run_Point.BeforeAjaxPageShow,expr:'input[data-toggle="captcha-code"]'})}(jQuery);